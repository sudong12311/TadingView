<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradingView Alert Setup</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            background-color: #131722;
            color: #d1d4dc;
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            padding: 20px;
            margin: 0;
            user-select: none;
        }
        h3 { margin-top: 0; margin-bottom: 20px; font-weight: 500; }
        .form-group { margin-bottom: 20px; }
        label { display: block; font-size: 13px; color: #787b86; margin-bottom: 8px; }
        select, input {
            width: 100%; padding: 12px; background-color: #2a2e39;
            border: 1px solid #363a45; border-radius: 6px;
            color: #f0f3fa; font-size: 16px; box-sizing: border-box; appearance: none;
        }
        select:focus, input:focus { outline: none; border-color: #2962ff; }
        .btn-container { margin-top: 30px; }
        button {
            width: 100%; padding: 14px; background-color: #2962ff;
            color: white; border: none; border-radius: 6px;
            font-size: 16px; font-weight: 600; cursor: pointer;
            transition: background 0.2s;
        }
        button:active { transform: scale(0.98); }
    </style>
</head>
<body>
    <h3>새로운 얼러트 만들기</h3>
    <div class="form-group">
        <label>종목 (Symbol)</label>
        <select id="symbol">
            <option value="BTC/KRW">비트코인 (BTC)</option>
            <option value="ETH/KRW">이더리움 (ETH)</option>
            <option value="XRP/KRW">리플 (XRP)</option>
            <option value="SOL/KRW">솔라나 (SOL)</option>
        </select>
    </div>
    <div class="form-group">
        <label>조건 (Condition)</label>
        <select id="condition">
            <option value="crossing_up">돌파 (Crossing Up)</option>
            <option value="crossing_down">이탈 (Crossing Down)</option>
            <option value="greater_than">가격 초과 (Greater Than)</option>
            <option value="less_than">가격 미만 (Less Than)</option>
        </select>
    </div>
    <div class="form-group">
        <label>목표 가격 (Price)</label>
        <input type="number" id="price" placeholder="예: 100000000" inputmode="decimal" />
    </div>
    <div class="btn-container">
        <button onclick="sendAlertData()">만들기</button>
    </div>
    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        function sendAlertData() {
            const symbol = document.getElementById("symbol").value;
            const condition = document.getElementById("condition").value;
            const price = document.getElementById("price").value;
            if(!price) {
                tg.showPopup({title: "입력 오류", message: "가격을 입력해주세요."});
                return;
            }
            const data = JSON.stringify({
                action: "create_alert", symbol: symbol, condition: condition, price: parseFloat(price)
            });
            tg.sendData(data);
        }
    </script>
</body>
</html>
